<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta charset="UTF-8"/>
    <!-- title for main page -->
    <title>Kura Udo Sushi</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    
</head>

<body>
    <section id = "header">
        <div class = "container"> 
            <nav>
                <div class = "logo"><h1>Kura Udo Sushi</h1></div>
                <ul class="nav-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Favourites</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>

            <div class="header-container">
                <h1>Kura Udo Sushi</h1>
                <p>Up in the clouds, down on your tastebuds</p>
                <button class="primary-button">Menu</button>
            </div>
        </div>
</section>

    
    <section>
        <!-- generic business information -->
        <h2>About Us</h2>
        <div id="about-section">Loading...</div>
    </section>

    <section>
        <!-- Information about people running it -->
        <h2>Meet the Team</h2>
        <div id="team-section">Loading...</div>
    </section>

    <nav>
        <!-- allowing navigation of webpages -->
        <a href="menu.html">View Menu</a> |
        <a href="favourites.html">Favourites</a> |
        <a href="contact.html">Contact Us</a> |
        <a href="complaints.html">Complaints</a>
    </nav>

    <script>
        function loadMainPageCSV(file, aboutId, teamId) {
            fetch(file)
                .then(response => response.text())
                .then(csv => {
                    Papa.parse(csv, {
                        header: false,
                        delimiter: ";",
                        skipEmptyLines: true,
                        complete: function(results) {
                            const aboutTarget = document.getElementById(aboutId);
                            const teamTarget = document.getElementById(teamId);

                            aboutTarget.innerHTML = "";
                            teamTarget.innerHTML = "";

                            results.data.slice(1).forEach(row => {
                                const aboutText = row[0]?.trim();
                                const teamText = row[1]?.trim();

                                if (aboutText) {
                                    const p = document.createElement("p");
                                    p.textContent = aboutText;
                                    aboutTarget.appendChild(p);
                                }

                                if (teamText) {
                                    const p = document.createElement("p");
                                    p.textContent = teamText;
                                    teamTarget.appendChild(p);
                                }
                            });
                        },
                        error: function(err) {
                            console.error("Error parsing CSV:", err);
                            document.getElementById(aboutId).textContent = "Failed to load about section.";
                            document.getElementById(teamId).textContent = "Failed to load team section.";
                        }
                    });
                })
                .catch(error => {
                    console.error("Error fetching CSV:", error);
                    document.getElementById(aboutId).textContent = "Failed to load about section.";
                    document.getElementById(teamId).textContent = "Failed to load team section.";
                });
        }

        loadMainPageCSV("main_page.csv", "about-section", "team-section");
    </script>
</body>
</html>
